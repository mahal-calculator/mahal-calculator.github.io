<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Mahal Candidate Travel History Calculator</title>



<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>



<style>

  body { 

    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 

    max-width: 700px; 

    margin: 30px auto; 

    padding: 20px;

    background-color: #f4f4f9;

    color: #333;

  }

  

  h2 { 

    text-align: center; 

    color: #2c3e50; 

    margin-bottom: 10px; 

  }

  

  .subtitle {

    text-align: center;

    color: #555;

    margin-bottom: 30px;

    font-size: 1.05em;

    font-weight: normal;

    line-height: 1.5;

    max-width: 650px;

    margin-left: auto;

    margin-right: auto;

  }

  

  fieldset { 

    background: white;

    border: 1px solid #ddd; 

    padding: 25px; 

    margin-bottom: 25px; 

    border-radius: 8px; 

    box-shadow: 0 2px 5px rgba(0,0,0,0.05);

  }

  

  legend {

    background-color: #007bff;

    color: white;

    padding: 6px 15px;

    border-radius: 4px;

    font-weight: 600;

    font-size: 0.95rem;

    line-height: 1.4;

  }



  /* --- NAME INPUT --- */

  .name-section {

    background: white;

    padding: 20px;

    border-radius: 8px;

    border: 1px solid #ddd;

    margin-bottom: 25px;

    box-shadow: 0 2px 5px rgba(0,0,0,0.05);

  }

  .name-section label {

    font-weight: bold;

    display: block;

    margin-bottom: 8px;

  }

  .name-section input {

    width: 100%;

    padding: 10px;

    font-size: 16px;

    border: 1px solid #ccc;

    border-radius: 4px;

    box-sizing: border-box;

  }



  /* --- FLEXBOX CHECKBOXES --- */

  .checkbox-row {

    display: flex;        

    align-items: flex-start; 

    margin-bottom: 15px;

    padding: 5px;

  }

  

  .checkbox-row input[type="checkbox"] {

    margin-right: 15px;  

    width: 20px;          

    height: 20px;

    cursor: pointer;

    accent-color: #007bff;

    margin-top: 2px; 

    flex-shrink: 0;

  }

  

  .checkbox-row label {

    font-size: 16px;

    cursor: pointer;

    user-select: none; 

    line-height: 1.4;

  }



  /* --- PROGRAM DETAILS INPUTS --- */

  #program-details {

    display: none; 

    margin-top: 15px;

    padding-left: 35px; 

    background-color: #f9f9f9;

    padding: 15px;

    border-radius: 4px;

    border-left: 3px solid #007bff;

  }

  

  .program-input-group {

    margin-bottom: 10px;

  }

  

  .program-input-group label {

    display: block;

    font-size: 0.9em;

    margin-bottom: 5px;

    color: #555;

    font-weight: bold;

  }

  

  .program-input-group input {

    padding: 8px;

    border: 1px solid #ccc;

    border-radius: 4px;

    width: 100%;

    max-width: 300px;

    font-family: inherit;

  }



  /* --- INSTRUCTION NOTE --- */

  #instruction-note {

    font-weight: bold;

    color: #e65100; 

    background-color: #fff3e0;

    padding: 10px;

    border-radius: 4px;

    margin-bottom: 15px;

    border-left: 4px solid #ff9800;

    display: none; 

  }



  /* --- DISCLAIMER STYLE --- */

  .disclaimer-text {

    color: #d9534f; 

    font-weight: bold;

    font-size: 0.95em;

  }



  /* --- TRIP ROW --- */

  .trip-row { 

    background-color: #f8f9fa; 

    border: 1px solid #e9ecef;

    border-radius: 6px;

    padding: 20px; 

    margin-bottom: 20px; 

  }

  

  .trip-number {

    font-weight: bold;

    color: #555;

    margin-bottom: 12px;

    font-size: 0.9em;

    text-transform: uppercase;

    letter-spacing: 0.5px;

  }

  

  .date-group {

    display: flex;

    gap: 25px;

    flex-wrap: wrap;

  }

  

  .input-wrapper {

    flex: 1;

    min-width: 160px;

  }

  

  .input-wrapper label {

    display: block;

    font-size: 0.85em;

    margin-bottom: 8px;

    color: #666;

    font-weight: 500;

  }

  

  .input-wrapper input {

    width: 100%;

    padding: 10px;

    border: 1px solid #ccc;

    border-radius: 4px;

    font-family: inherit;

    box-sizing: border-box; 

  }



  /* --- BUTTONS --- */

  .btn-submit { 

    width: 100%;

    padding: 16px; 

    font-size: 18px; 

    font-weight: bold;

    cursor: pointer; 

    background-color: #28a745; 

    color: white; 

    border: none; 

    border-radius: 6px; 

    transition: background 0.3s, transform 0.1s;

    margin-top: 10px;

    box-shadow: 0 4px 6px rgba(0,0,0,0.1);

  }

  .btn-submit:hover { background-color: #218838; transform: translateY(-1px); }

  .btn-submit:active { transform: translateY(0); }



  /* New PDF Button Style */

  .btn-pdf {

    background-color: #007bff; /* Blue */

    margin-top: 20px;

    margin-bottom: 20px;

    width: auto;

    padding: 12px 25px;

    display: inline-block;

  }

  .btn-pdf:hover {

    background-color: #0056b3;

  }



  /* --- RESULTS AREA --- */

  #results-area {

    padding: 30px;

    background-color: #fff;

    border: 1px solid #eee;

    border-top: 6px solid #333; 

    border-radius: 8px;

    display: none; 

    box-shadow: 0 10px 25px rgba(0,0,0,0.1);

    line-height: 1.6;

    margin-top: 40px;

    /* Important for PDF generation */

    max-width: 100%;

    box-sizing: border-box;

  }



  /* --- CALCULATION LOG STYLING --- */

  .log-section-title {

    font-size: 1.1em;

    font-weight: bold;

    color: #333;

    border-bottom: 2px solid #eee;

    padding-bottom: 10px;

    margin-top: 20px;

    margin-bottom: 15px;

    page-break-after: avoid;

  }



  .calc-log-item {

    padding: 10px 15px; 

    margin-bottom: 10px; 

    background-color: #fcfcfc;

    border-left: 3px solid #ddd;

    border-radius: 0 4px 4px 0;

    page-break-inside: avoid; /* Keeps items together in PDF */

  }



  .log-trip { 

    color: #555; 

    font-weight: normal; 

    font-size: 0.9em; 

  }

  

  .log-gap-text { color: #333; font-weight: normal; font-size: 0.9em; } 

  

  .log-details {

    margin-top: 3px;

    padding-left: 10px;

    font-size: 0.95em;

    color: #444;

  }



  .log-explanation {

    font-size: 0.85em;

    color: #666;

    font-style: italic;

    margin-top: 4px;

    padding-left: 10px;

  }



  /* Yearly Table */

  .year-table {

    width: 100%;

    border-collapse: collapse;

    margin-top: 10px;

    margin-bottom: 20px;

    page-break-inside: avoid;

  }

  .year-table th, .year-table td {

    border: 1px solid #ddd;

    padding: 10px;

    text-align: left;

  }

  .year-table th { background-color: #f1f1f1; }



  /* Final Status Section - Now at Top */

  .status-footer {

    background-color: #f8f9fa;

    padding: 20px;

    border-radius: 6px;

    margin-bottom: 30px; /* Changed from margin-top */

    border: 1px solid #e9ecef;

    page-break-inside: avoid;

  }



  /* Grand Total */

  .grand-total { 

    font-size: 1.4em; 

    font-weight: bold; 

    color: #000;

    text-align: center;

    padding: 20px;

    background-color: #fff;

    border: 2px solid #000;

    border-radius: 8px;

    margin: 30px 0;

    page-break-inside: avoid;

  }



  /* Footer Disclaimer */

  .result-disclaimer {

    margin-top: 30px;

    padding: 15px;

    border: 2px solid #d9534f;

    background-color: #fff5f5;

    color: #d9534f;

    font-size: 0.9em;

    border-radius: 6px;

    page-break-inside: avoid;

  }

  .result-disclaimer strong { display: block; margin-bottom: 8px; text-decoration: underline;}



  /* --- ELIGIBILITY CHART STYLING --- */

  .eligibility-container {

    margin-top: 40px;

    border-top: 4px solid #007bff;

    padding-top: 20px;

    page-break-inside: avoid;

  }

  

  .eligibility-table {

    width: 100%;

    border-collapse: collapse;

    margin-bottom: 15px;

    font-size: 0.9em;

  }

  

  .eligibility-table th {

    background-color: #f1f1f1; /* Light gray to match left col */

    color: #333;               /* Dark text */

    padding: 10px;

    border: 1px solid #ddd;    /* Standard border */

    vertical-align: middle;

    font-weight: bold;

  }

  

  .eligibility-table td {

    padding: 10px;

    border: 1px solid #ddd;

    text-align: center;

    vertical-align: middle;

  }



  .eligibility-row-header {

    background-color: #f1f1f1;

    font-weight: bold;

    text-align: left !important;

  }



  .eligibility-note {

    font-size: 0.9em;

    color: #333;

    line-height: 1.5;

  }

  

  .red-text {

    color: #d9534f;

    font-weight: bold;

  }

</style>

</head>

<body>



<br>

<h2>Mahal Candidate Travel History Calculator</h2>

<div class="subtitle">This is a tool to calculate how long you've stayed in Israel throughout your life. Information from this calculator will help you understand whether you may be eligible for a shortened 18-month service. You may download a PDF summary at the end, but information is not saved automatically and not sent anywhere.</div>

<br>



<form id="myForm">

  

  <div class="name-section">

    <label for="candidate_name">Candidate Name:</label>

    <input type="text" id="candidate_name" placeholder="Enter your full name">

  </div>



  <fieldset>

    <legend>1. Status</legend>

    <div class="checkbox-row">

        <input type="checkbox" name="group_status" value="bnei_mehagrim" id="chk_mehagrim" onclick="handleStatusChange(this)"> 

        <label for="chk_mehagrim">Bnei Mehagrim</label>

    </div>

    <div class="checkbox-row">

        <input type="checkbox" name="group_status" value="tourist" id="chk_tourist" onclick="handleStatusChange(this)"> 

        <label for="chk_tourist">Tourist</label>

    </div>

  </fieldset>



  <fieldset>

    <legend>2. Have you participated in a recognized program in Israel, such as Mechina, Masa, or Midrasha?</legend>

    <div class="checkbox-row">

        <input type="checkbox" name="group_program" value="yes_program" id="chk_yes" onclick="handleProgramChange(this)"> 

        <label for="chk_yes">I have participated in a program</label>

    </div>

    

    <div id="program-details">

        <div class="program-input-group">

            <label>Name of Program:</label>

            <input type="text" id="program_name" placeholder="e.g., Mechinat Kol Ami">

        </div>

        <div class="date-group">

            <div class="program-input-group" style="flex:1">

                <label>Program Start Date:</label>

                <input type="date" id="program_start">

            </div>

            <div class="program-input-group" style="flex:1">

                <label>Program End Date:</label>

                <input type="date" id="program_end">

            </div>

        </div>

    </div>



    <div class="checkbox-row">

        <input type="checkbox" name="group_program" value="no_program" id="chk_no" onclick="handleProgramChange(this)"> 

        <label for="chk_no">I have not participated in a program</label>

    </div>

  </fieldset>



  <fieldset>

    <legend>3. Record of Entries & Exits</legend>

    

    <div id="instruction-note"></div>



    <div id="travel-rows">

      </div>

    <div style="font-size: 0.85em; color: #777; margin-top: 15px; font-style: italic;">

        * New rows will appear automatically when you fill the current one.

    </div>

  </fieldset>



  <fieldset style="border-color: #d9534f;">

    <legend style="background-color: #d9534f;">4. Disclaimer</legend>

    

    <div class="checkbox-row">

        <input type="checkbox" id="disclaimer_1"> 

        <label for="disclaimer_1" class="disclaimer-text">

            I understand that the calculator tool is for estimation purposes only. The official count is conducted by the army and will not necessarily match the count of this calculator.

        </label>

    </div>



    <div class="checkbox-row">

        <input type="checkbox" id="disclaimer_2"> 

        <label for="disclaimer_2" class="disclaimer-text">

            The calculator may make mistakes, and I am solely responsible for double-checking results from the calculator. Mahal cannot take responsibilty for errors.

        </label>

    </div>

  </fieldset>



  <button type="button" class="btn-submit" onclick="getFormData()">Calculate Total Days</button>

  

  <div id="results-area"></div>



</form>



<script>

  let rowCount = 0;



  document.addEventListener('DOMContentLoaded', function() {

    addNewRow();

  });



  function formatDatePretty(dateString) {

    if(!dateString) return "";

    const parts = dateString.split('-');

    const year = parseInt(parts[0]);

    const month = parseInt(parts[1]) - 1; 

    const day = parseInt(parts[2]);

    const d = new Date(year, month, day);

    const options = { year: 'numeric', month: 'long', day: 'numeric' };

    return d.toLocaleDateString('en-US', options);

  }



  function calculateDuration(startStr, endStr) {

      if(!startStr || !endStr) return "N/A";

      let start = new Date(startStr);

      let end = new Date(endStr);

      if(end < start) return "Invalid Dates";



      let years = end.getFullYear() - start.getFullYear();

      let months = end.getMonth() - start.getMonth();

      let days = end.getDate() - start.getDate();



      if (days < 0) {

          months--;

          let prevMonthDate = new Date(end.getFullYear(), end.getMonth(), 0);

          days += prevMonthDate.getDate();

      }

      if (months < 0) {

          years--;

          months += 12;

      }

      let totalMonths = (years * 12) + months;

      return `${totalMonths} months and ${days} days`;

  }



  function addNewRow() {

    rowCount++;

    const container = document.getElementById('travel-rows');

    const rowDiv = document.createElement('div');

    rowDiv.className = 'trip-row';

    rowDiv.dataset.id = rowCount; 



    rowDiv.innerHTML = `

        <div class="trip-number">Trip Entry ${rowCount}</div>

        <div class="date-group">

            <div class="input-wrapper">

                <label>Date Arrived in Israel:</label>

                <input type="date" class="date-arrival" name="arrival_${rowCount}">

            </div>

            <div class="input-wrapper">

                <label>Date Departed from Israel:</label>

                <input type="date" class="date-departure" name="departure_${rowCount}">

            </div>

        </div>

    `;

    container.appendChild(rowDiv);

  }



  document.getElementById('travel-rows').addEventListener('change', function(e) {

    if (e.target.tagName === 'INPUT' && e.target.type === 'date') {

        const currentRow = e.target.closest('.trip-row');

        const arrivalInput = currentRow.querySelector('.date-arrival');

        const departureInput = currentRow.querySelector('.date-departure');

        

        if (arrivalInput.value && departureInput.value) {

            const arrDate = new Date(arrivalInput.value);

            const depDate = new Date(departureInput.value);



            if (depDate < arrDate) {

                alert("Error: Departure date cannot be earlier than Arrival date.");

                e.target.value = ""; 

                return; 

            }

        }



        const allRows = document.querySelectorAll('.trip-row');

        const lastRow = allRows[allRows.length - 1];



        if (currentRow === lastRow && arrivalInput.value && departureInput.value) {

            addNewRow(); 

        }

    }

  });



  function selectOnlyOne(checkbox) {

    var group = document.getElementsByName(checkbox.name);

    group.forEach((item) => {

      if (item !== checkbox) item.checked = false;

    });

  }



  function handleStatusChange(checkbox) {

    selectOnlyOne(checkbox);

    const noteDiv = document.getElementById('instruction-note');

    if (checkbox.checked) {

        noteDiv.style.display = "block";

        if (checkbox.value === "bnei_mehagrim") {

            noteDiv.innerText = "Please indicate your travel records from Age 10.";

        } else if (checkbox.value === "tourist") {

            noteDiv.innerText = "Please indicate your travel records since Age 16.";

        }

    } else {

        noteDiv.style.display = "none";

    }

  }



  function handleProgramChange(checkbox) {

    selectOnlyOne(checkbox);

    const detailsDiv = document.getElementById('program-details');

    if (checkbox.checked && checkbox.value === "yes_program") {

        detailsDiv.style.display = "block";

    } else {

        detailsDiv.style.display = "none";

        document.getElementById('program_name').value = "";

        document.getElementById('program_start').value = "";

        document.getElementById('program_end').value = "";

    }

  }



  function downloadPDF() {

      // 1. Get the element

      const element = document.getElementById('results-area');

      

      // 2. Temporarily ensure the element is ready for capture

      window.scrollTo(0, 0);



      // 3. Get Candidate Name for Filename

      const nameInput = document.getElementById('candidate_name').value.trim();

      let cleanName = "mahal_candidate";

      if (nameInput) {

        // Replace spaces with underscores, remove non-alphanumeric chars, toLowerCase

        cleanName = nameInput.replace(/[^a-zA-Z0-9 ]/g, "").replace(/\s+/g, "_").toLowerCase();

      }

      const finalFileName = `${cleanName}_days_in_israel.pdf`;



      // 4. Set options

      const opt = {

          margin:       [10, 10, 10, 10], 

          filename:     finalFileName,

          image:        { type: 'jpeg', quality: 0.98 },

          html2canvas:  { 

              scale: 2, 

              useCORS: true, 

              scrollY: 0, 

              windowWidth: document.documentElement.offsetWidth 

          },

          jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' },

          pagebreak:    { mode: ['css', 'legacy'] }

      };



      // 5. Generate

      if (typeof html2pdf !== 'undefined') {

          html2pdf().set(opt).from(element).save().catch(err => {

              console.error("PDF Generation Error:", err);

              alert("There was an error generating the PDF. Please check the console or try a different browser.");

          });

      } else {

          alert("Error: PDF library not loaded. Please check your internet connection.");

      }

  }



  function getFormData() {

    const d1 = document.getElementById('disclaimer_1').checked;

    const d2 = document.getElementById('disclaimer_2').checked;

    const candidateName = document.getElementById('candidate_name').value.trim();



    if (!d1 || !d2) {

        alert("You must acknowledge the disclaimers by checking both red boxes before submitting.");

        return; 

    }

    

    if (!candidateName) {

        alert("Please enter your name at the top of the form.");

        document.getElementById('candidate_name').focus();

        return;

    }



    let validTrips = [];

    const rows = document.querySelectorAll('.trip-row');

    

    rows.forEach(row => {

        const arrVal = row.querySelector('.date-arrival').value;

        const depVal = row.querySelector('.date-departure').value;

        if (arrVal && depVal) {

            validTrips.push({

                start: new Date(arrVal),

                end: new Date(depVal),

                startStr: arrVal,

                endStr: depVal

            });

        }

    });



    validTrips.sort((a, b) => a.start - b.start);



    // --- HTML CONSTRUCTION ---

    

    // 1. STATUS FOOTER (Now moved to TOP)

    const status = document.querySelector('input[name="group_status"]:checked');

    const program = document.querySelector('input[name="group_program"]:checked');

    let infoSectionHTML = `<div class="status-footer">`;

    infoSectionHTML += `<strong>Candidate Name:</strong> ${candidateName}<br><br>`;

    infoSectionHTML += `<strong>Legal Status:</strong> ${status ? status.nextElementSibling.innerText : "Not Selected"}<br>`;

    

    if (!program || program.value !== 'yes_program') {

        infoSectionHTML += `<strong>Program Status:</strong> ${program ? program.nextElementSibling.innerText : "Not Selected"}<br>`;

    }



    if (program && program.value === "yes_program") {

        let progName = document.getElementById('program_name').value;

        let progStart = document.getElementById('program_start').value;

        let progEnd = document.getElementById('program_end').value;

        let progDuration = calculateDuration(progStart, progEnd);

        infoSectionHTML += `<strong>Program Name:</strong> ${progName ? progName : "Not entered"}<br>`;

        infoSectionHTML += `<strong>Program Dates:</strong> ${formatDatePretty(progStart)} to ${formatDatePretty(progEnd)}<br>`;

        infoSectionHTML += `<strong>Program Duration:</strong> ${progDuration}`;

    }

    infoSectionHTML += `</div>`;



    // 2. CALCULATION LOG

    let logHTML = `<div class="log-section-title">Calculation Log (61 day rule)</div>`;

    let grandTotalDays = 0;

    let yearlyCounts = {};



    function addRangeToYears(startDate, endDate) {

        let current = new Date(startDate);

        current.setHours(12,0,0,0);

        let end = new Date(endDate);

        end.setHours(12,0,0,0);

        while (current <= end) {

            const y = current.getFullYear();

            if (!yearlyCounts[y]) yearlyCounts[y] = 0;

            yearlyCounts[y]++;

            current.setDate(current.getDate() + 1);

        }

    }



    if (validTrips.length === 0) {

        logHTML += "<p>No complete travel dates entered.</p>";

    } else {

        for (let i = 0; i < validTrips.length; i++) {

            let currentTrip = validTrips[i];

            

            let diffTime = Math.abs(currentTrip.end - currentTrip.start);

            let tripDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1; 

            

            grandTotalDays += tripDays;

            addRangeToYears(currentTrip.start, currentTrip.end); 



            let sDate = formatDatePretty(currentTrip.startStr);

            let eDate = formatDatePretty(currentTrip.endStr);



            logHTML += `<div class="calc-log-item">`;

            logHTML += `<div class="log-trip">Trip ${i+1}: ${sDate} to ${eDate}</div>`;

            logHTML += `<div class="log-details">↳ <strong>${tripDays} days</strong> added.</div>`;

            logHTML += `</div>`;



            if (i < validTrips.length - 1) {

                let nextTrip = validTrips[i+1];

                let gapTime = nextTrip.start - currentTrip.end;

                let gapDays = Math.ceil(gapTime / (1000 * 60 * 60 * 24)) - 1;



                if (gapDays < 61 && gapDays > 0) {

                    grandTotalDays += gapDays;

                    let gapStart = new Date(currentTrip.end);

                    gapStart.setDate(gapStart.getDate() + 1);

                    let gapEnd = new Date(nextTrip.start);

                    gapEnd.setDate(gapEnd.getDate() - 1);



                    addRangeToYears(gapStart, gapEnd);



                    logHTML += `<div class="calc-log-item">`;

                    logHTML += `<div class="log-gap-text">Gap of ${gapDays} days (< 61 days).</div>`;

                    logHTML += `<div class="log-details">↳ Counted as 61 day rule. <strong>${gapDays} days</strong> added.</div>`;

                    logHTML += `<div class="log-explanation">You were away from Israel for fewer than 61 days. Therefore, your days away are counted as days in Israel.</div>`;

                    logHTML += `</div>`;

                } 

            }

        }

    }



    let yearTableHTML = `<div class="log-section-title">Yearly Breakdown (Includes 61 day rule)</div>`;

    yearTableHTML += `<table class="year-table"><thead><tr><th>Year</th><th>Days Counted</th></tr></thead><tbody>`;

    let sortedYears = Object.keys(yearlyCounts).sort();

    if(sortedYears.length > 0) {

        sortedYears.forEach(year => {

            yearTableHTML += `<tr><td>${year}</td><td>${yearlyCounts[year]}</td></tr>`;

        });

    } else {

        yearTableHTML += `<tr><td colspan="2">No dates recorded</td></tr>`;

    }

    yearTableHTML += `</tbody></table>`;



    let summaryHTML = `<div class="grand-total">GRAND TOTAL: ${grandTotalDays} DAYS IN ISRAEL</div>`;





    let disclaimerHTML = `

      <div class="result-disclaimer">

        <strong>DISCLAIMER CONFIRMATION</strong>

        [x] I understand that the calculator tool is for estimation purposes only. The official count is conducted by the army and will not necessarily match the count of this calculator.<br><br>

        [x] The calculator may make mistakes, and I am solely responsible for double-checking results from the calculator. Mahal cannot take responsibilty for errors.

      </div>

    `;



    // --- PDF BUTTON HTML ---

    // The data-html2canvas-ignore attribute makes sure the button itself doesn't appear inside the downloaded PDF

    let pdfButtonHTML = `

      <div style="text-align: center;">

        <button type="button" class="btn-submit btn-pdf" onclick="downloadPDF()" data-html2canvas-ignore="true">

          Download Summary as PDF

        </button>

      </div>

    `;



    // Chart HTML

    let chartHTML = `

    <div class="eligibility-container">

        <h3>Eligibility for Shortened Service</h3>

        <table class="eligibility-table">

            <thead>

                <tr>

                    <th>Status</th>

                    <th>Without participation in a recognized Program</th>

                    <th>After participation in a Government-recognized Program</th>

                </tr>

            </thead>

            <tbody>

                <tr>

                    <td class="eligibility-row-header">Bnei Mehagrim<br><span style="font-weight:normal; font-size:0.85em;">(Time counted since age 10)</span></td>

                    <td>up to 120 days in any <span class="red-text">calendar year</span></td>

                    <td>up to 365 days</td>

                </tr>

                <tr>

                    <td class="eligibility-row-header">Tourists<br><span style="font-weight:normal; font-size:0.85em;">(Time counted since age 16)</span></td>

                    <td>up to 365 days</td>

                    <td>up to 547 days</td>

                </tr>

            </tbody>

        </table>

        

        <div class="eligibility-note">

            <p>If your stay in Israel does not exceed the time specified in the above chart, since the specified age, you <span class="red-text">may be eligible for a shortened 18-month service but this is not a guarantee.</span></p>

            <p><span class="red-text">Eligibility for a shortened service is determined by the IDF only after you arrive in Israel.</span></p>

            <p><span class="red-text">Mahal cannot guarantee eligibility for a shortened service before your arrival.</span></p>

        </div>

    </div>

    `;



    // --- ASSEMBLY ---

    const resultDiv = document.getElementById('results-area');

    resultDiv.style.display = 'block';

    

    // Updated Order: Info -> Log -> Table -> Summary -> Disclaimer -> Button -> Chart

    resultDiv.innerHTML = infoSectionHTML + logHTML + yearTableHTML + summaryHTML + disclaimerHTML + pdfButtonHTML + chartHTML;

    

    resultDiv.scrollIntoView({behavior: "smooth"});

  }

</script>



</body>

</html>
